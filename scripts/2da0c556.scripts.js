!function(){function a(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function b(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);return a.shiftKey||(b=b.toLowerCase()),b}return m[a.which]?m[a.which]:n[a.which]?n[a.which]:String.fromCharCode(a.which).toLowerCase()}function c(a){a=a||{};var b,c=!1;for(b in s)a[b]?c=!0:s[b]=0;c||(u=!1)}function d(a,b,c,d,e,f){var g,i,j=[],k=c.type;if(!q[a])return[];for("keyup"==k&&h(a)&&(b=[a]),g=0;g<q[a].length;++g)if(i=q[a][g],!(!d&&i.seq&&s[i.seq]!=i.level||k!=i.action||("keypress"!=k||c.metaKey||c.ctrlKey)&&b.sort().join(",")!==i.modifiers.sort().join(","))){var l=d&&i.seq==d&&i.level==f;(!d&&i.combo==e||l)&&q[a].splice(g,1),j.push(i)}return j}function e(a){var b=[];return a.shiftKey&&b.push("shift"),a.altKey&&b.push("alt"),a.ctrlKey&&b.push("ctrl"),a.metaKey&&b.push("meta"),b}function f(a,b,c){w.stopCallback(b,b.target||b.srcElement,c)||!1!==a(b,c)||(b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation(),b.returnValue=!1,b.cancelBubble=!0)}function g(a){"number"!=typeof a.which&&(a.which=a.keyCode);var c=b(a);c&&("keyup"==a.type&&t===c?t=!1:w.handleKey(c,e(a),a))}function h(a){return"shift"==a||"ctrl"==a||"alt"==a||"meta"==a}function i(a,b){var c,d,e,f=[];for(c="+"===a?["+"]:a.split("+"),e=0;e<c.length;++e)d=c[e],p[d]&&(d=p[d]),b&&"keypress"!=b&&o[d]&&(d=o[d],f.push("shift")),h(d)&&f.push(d);if(c=d,e=b,!e){if(!k){k={};for(var g in m)g>95&&112>g||m.hasOwnProperty(g)&&(k[m[g]]=g)}e=k[c]?"keydown":"keypress"}return"keypress"==e&&f.length&&(e="keydown"),{key:d,modifiers:f,action:e}}function j(a,e,g,h,k){r[a+":"+g]=e,a=a.replace(/\s+/g," ");var m=a.split(" ");if(1<m.length){var n=a;for(a=function(a){return function(){u=a,++s[n],clearTimeout(l),l=setTimeout(c,1e3)}},h=function(a){f(e,a,n),"keyup"!==g&&(t=b(a)),setTimeout(c,10)},k=s[n]=0;k<m.length;++k){var o=k+1===m.length?h:a(g||i(m[k+1]).action);j(m[k],o,g,n,k)}}else m=i(a,g),q[m.key]=q[m.key]||[],d(m.key,m.modifiers,{type:m.action},h,a,k),q[m.key][h?"unshift":"push"]({callback:e,modifiers:m.modifiers,action:m.action,seq:h,level:k,combo:a})}for(var k,l,m={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},n={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},o={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},p={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},q={},r={},s={},t=!1,u=!1,v=1;20>v;++v)m[111+v]="f"+v;for(v=0;9>=v;++v)m[v+96]=v;a(document,"keypress",g),a(document,"keydown",g),a(document,"keyup",g);var w={bind:function(a,b,c){a=a instanceof Array?a:[a];for(var d=0;d<a.length;++d)j(a[d],b,c);return this},unbind:function(a,b){return w.bind(a,function(){},b)},trigger:function(a,b){return r[a+":"+b]&&r[a+":"+b]({},a),this},reset:function(){return q={},r={},this},stopCallback:function(a,b){return-1<(" "+b.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.contentEditable&&"true"==b.contentEditable},handleKey:function(a,b,e){b=d(a,b,e);var g,i={},j=0,k=!1;for(g=0;g<b.length;++g)b[g].seq&&(j=Math.max(j,b[g].level));for(g=0;g<b.length;++g)b[g].seq?b[g].level==j&&(k=!0,i[b[g].seq]=1,f(b[g].callback,e,b[g].combo)):k||f(b[g].callback,e,b[g].combo);e.type==u&&!h(a)&&c(i)}};window.Mousetrap=w,"function"==typeof define&&define.amd&&define(w)}(),Mousetrap=function(a){var b={},c=a.stopCallback;return a.stopCallback=function(a,d,e){return b[e]?!1:c(a,d,e)},a.bindGlobal=function(c,d,e){if(a.bind(c,d,e),c instanceof Array)for(d=0;d<c.length;d++)b[c[d]]=!0;else b[c]=!0},a}(Mousetrap),angular.module("palette",["ngSanitize","templates-main"]).factory("paletteService",[function(){var a=[];return{subscribedMethod:void 0,exportCommands:function(b){"undefined"!=typeof this.subscribedMethod&&this.subscribedMethod(b,a),a=b},getCommands:function(){return a},subscribe:function(a){this.subscribedMethod=a}}}]).directive("drBlur",function(){return function(a,b,c){b.bind("blur",function(){a.$apply(c.drBlur)})}}).directive("drFocusOn",[function(){return{restrict:"A",link:function(a,b,c){c.$observe("drFocusOn",function(a){"true"===a&&setTimeout(function(){b[0].focus()},100)})}}}]).directive("drScrollToContain",function(){return{restrict:"A",link:function(a,b,c){c.$observe("drScrollToContain",function(a){"true"===a&&b[0].scrollIntoView(!1)})}}}).directive("drKeydown",["$parse",function(a){return{restrict:"A",link:function(b,c,d){c.bind("keydown",function(c){b.$apply(function(){a(d.drKeydown)(b,{$event:c})})})}}}]).filter("drHighlight",function(){function a(a,b,c,d,e){return[b.slice(0,a),c,b.slice(a,a+e),d,b.slice(a+e)].join("")}return function(b,c){if("undefined"!=typeof c&&""!==c){var d=b.toLowerCase().indexOf(c);if(-1!==d)return a(d,b,'<span class="palettematch">',"</span>",c.length)}return b}}).directive("palette",["$timeout","$location","$route","paletteService",function(a,b,c,d){return{restrict:"EA",replace:!0,scope:{},templateUrl:"angular-palette/palette.tpl.html",link:function(a){Mousetrap.bindGlobal(["ctrl+shift+l","command+shift+l"],function(){a.visible?a.$apply(function(){a.close()}):a.$apply(function(){a.open()})})},controller:["$scope",function(e){function f(){for(var a in c.routes){var b=c.routes[a];"undefined"!=typeof b.name&&e.commands.push({name:"Goto: "+b.name,cmd:"link",data:a})}}function g(a){e.commands.splice(-a.length,a.length)}function h(a){e.commands.push.apply(e.commands,a)}var i=13,j=38,k=40,l=27;e.visible=!1,e.commands=[],d.subscribe(function(a,b){g(b),h(a)}),e.activeCmd=0,f(),e.paletteInputKeyHandler=function(a){a.keyCode===j?(a.preventDefault(),e.moveSelectUp()):a.keyCode===k?(a.preventDefault(),e.moveSelectDown()):a.keyCode===l?e.close():a.keyCode===i?e.finish():e.activeCmd=0},e.moveSelectUp=function(){e.activeCmd>0?e.activeCmd--:e.activeCmd=e.filteredCommands.length-1},e.moveSelectDown=function(){e.activeCmd<e.filteredCommands.length-1?e.activeCmd++:e.activeCmd=0},e.finish=function(){e.visible&&(e.useSelection(e.filteredCommands[e.activeCmd]),e.close())},e.close=function(){a(function(){e.visible=!1},1)},e.open=function(){e.query="",e.visible=!0,e.activeCmd=0},e.useSelection=function(a){if("undefined"==typeof a)e.parseTextCommand(e.query);else try{"function"==typeof a.cmd?a.cmd(a.data):e[a.cmd](a.data)}catch(b){console.log("missing a command")}},e.link=function(a){b.path(a)},e.extLink=function(a){window.location=a},e.parseTextCommand=function(a){if(":"===a[0]){var b=parseInt(a.slice(1),10);window.scrollTo(0,b)}}}]}}]),angular.module("templates-main",["angular-palette/palette.tpl.html"]),angular.module("angular-palette/palette.tpl.html",[]).run(["$templateCache",function(a){a.put("angular-palette/palette.tpl.html",'<div class="palette-body" ng-class="{palettevisible: visible}">\n    <div class="palette-inner">\n        <input type="text" class="palette-input" ng-model="query.name"\n            dr-blur="close()" dr-focus-on="{{visible}}" dr-keydown="paletteInputKeyHandler($event)">\n        <div class="palette-results" ng-show="filteredCommands.length">\n            <div class="palette-item"\n                ng-repeat="command in (filteredCommands = (commands | orderBy: \'name\'| filter:query ))"\n                ng-class="{selected: $index == activeCmd}"\n                ng-bind-html-unsafe="command.name | drHighlight:query.name"\n                dr-scroll-to-contain="{{$index == activeCmd}}"\n                ng-click="useSelection(command)">\n            </div>\n        </div>\n    </div>\n</div>\n')}]),angular.module("angularPaletteDemoApp",["palette"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",name:"Main Page"}).when("/first",{templateUrl:"views/first.html",controller:"FirstCtrl",name:"First Page"}).when("/second",{templateUrl:"views/second.html",controller:"SecondCtrl",name:"Second Page"}).otherwise({redirectTo:"/"})}]),angular.module("angularPaletteDemoApp").controller("MainCtrl",["$scope","paletteService",function(a,b){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],b.exportCommands([{name:"Github: angular-palette",cmd:"extLink",data:"https://github.com/DerekRies/angular-palette"},{name:"/r/webdev",cmd:"extLink",data:"http://reddit.com/r/webdev"}])}]),angular.module("angularPaletteDemoApp").controller("FirstCtrl",["$scope","paletteService",function(a,b){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],b.exportCommands([{name:"Google",cmd:"extLink",data:"http://google.com"},{name:"Reddit: /r/programming",cmd:"extLink",data:"http://reddit.com/r/programming"},{name:"Hackernews",cmd:"extLink",data:"http://news.ycombinator.com"},{name:"Github",cmd:"extLink",data:"https://github.com"},{name:"Github: angular-palette",cmd:"extLink",data:"https://github.com/DerekRies/angular-palette"},{name:"Reddit: /r/webdev",cmd:"extLink",data:"http://reddit.com/r/webdev"},{name:"StackOverflow: Search",cmd:"extLink",data:"http://stackoverflow.com/search?q="},{name:"StackOverflow",cmd:"extLink",data:"http://stackoverflow.com"},{name:"dribbble.com",cmd:"extLink",data:"http://dribbble.com"},{name:"Youtube",cmd:"extLink",data:"http://youtube.com/watch?v=IAISUDbjXj0"},{name:"Reddit",cmd:"extLink",data:"http://reddit.com"}])}]),angular.module("angularPaletteDemoApp").controller("SecondCtrl",["$scope","paletteService",function(a,b){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.makeMessage=function(a){window.alert(a)},b.exportCommands([{name:"Notify: Alert Hello",cmd:function(){a.makeMessage("hello world")}},{name:"Notify: Alert Goodbye",cmd:function(){a.makeMessage("goodbye")}}])}]);